<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tradex App</title>
<style>
  body, html {
    margin: 0; padding: 0; height: 100%; background-color: #0e0e10; font-family: sans-serif; color: white;
  }
  #login-container {
    height: 100vh; width: 100vw;
    display: flex; align-items: center; justify-content: center;
    background-color: #0e0e10; flex-direction: column;
  }
  #login-container h1 {
    margin-bottom: 20px;
    font-weight: 700;
    font-size: 28px;
    letter-spacing: 1.5px;
  }
  #login-container input {
    margin: 8px 0;
    padding: 10px;
    border-radius: 4px;
    border: 1px solid #555;
    background-color: #1a1a1a;
    color: white;
    width: 200px;
    font-size: 16px;
  }
  #login-container button {
    padding: 10px 20px;
    background-color: #3a3a3a;
    border: none;
    border-radius: 4px;
    color: white;
    cursor: pointer;
    font-size: 16px;
    margin-top: 10px;
  }
  #login-error {
    color: #f44336;
    margin-top: 10px;
    height: 20px;
  }
  #loader {
    height: 100vh; width: 100vw;
    display: none;
    align-items: center; justify-content: center;
    background-color: #0e0e10;
    flex-direction: column;
    font-size: 20px;
    letter-spacing: 2px;
  }
  .abstergo-loader {
    display: flex;
    gap: 10px;
  }
  .abstergo-loader div {
    width: 15px; height: 15px;
    background: #00ff99;
    border-radius: 50%;
    animation: pulse 1.5s infinite ease-in-out;
  }
  .abstergo-loader div:nth-child(2) {
    animation-delay: 0.3s;
  }
  .abstergo-loader div:nth-child(3) {
    animation-delay: 0.6s;
  }
  @keyframes pulse {
    0%, 100% { opacity: 0.2; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.5); }
  }
  #app {
    display: none;
    height: 100vh; width: 100vw;
    background-color: #0e0e10;
    position: relative;
    overflow: hidden;
  }
  #symbol-selector {
    position: absolute;
    top: 15px; left: 15px;
    background: rgba(20,20,20,0.85);
    border: 1px solid #444;
    border-radius: 6px;
    padding: 12px;
    z-index: 10;
  }
  #symbol-selector label, select {
    color: white;
    font-weight: 600;
    font-size: 14px;
  }
  select {
    margin-left: 8px;
    background: #0e0e10;
    border: 1px solid #555;
    border-radius: 4px;
    padding: 4px 8px;
    color: white;
  }
  #chart-container {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    width: 100%; height: 100%;
  }
  #bot {
    position: absolute;
    top: 50px;
    left: 20px;
    background: rgba(0,0,0,0.8);
    border-radius: 8px;
    padding: 15px;
    width: 260px;
    font-size: 14px;
    color: #00ff99;
    box-shadow: 0 0 12px #00ff99aa;
    user-select: none;
  }
  #bot h2 {
    margin: 0 0 12px 0;
    font-weight: 700;
    font-size: 18px;
    color: #00ffaa;
  }
  #bot ul {
    list-style: none;
    padding: 0; margin: 0;
  }
  #bot ul li {
    margin-bottom: 10px;
    line-height: 1.3;
  }
</style>
</head>
<body>

<div id="login-container">
  <h1>Войти в Tradex</h1>
  <input type="text" id="login" placeholder="Login" autocomplete="off" />
  <input type="password" id="password" placeholder="Password" autocomplete="off" />
  <button id="login-btn">Sign In</button>
  <div id="login-error"></div>
</div>

<div id="loader">
  <div class="abstergo-loader">
    <div></div><div></div><div></div>
  </div>
  <div style="margin-top:15px;">Tradex App Loading</div>
</div>

<div id="app">
  <div id="symbol-selector">
    <label for="symbol">Монета:</label>
    <select id="symbol">
      <option value="BTCUSDT">Bitcoin (BTC)</option>
      <option value="ETHUSDT">Ethereum (ETH)</option>
      <option value="SOLUSDT">Solana (SOL)</option>
      <option value="XRPUSDT">XRP</option>
      <option value="DOGEUSDT">Dogecoin (DOGE)</option>
      <option value="ADAUSDT">Cardano (ADA)</option>
    </select>
  </div>
  <div id="chart-container"></div>
  <div id="bot">
    <h2>Прогнозы бота</h2>
    <ul id="bot-messages"></ul>
  </div>
</div>

<script src="https://s3.tradingview.com/tv.js"></script>
<script>
const loginContainer = document.getElementById('login-container');
const loader = document.getElementById('loader');
const app = document.getElementById('app');
const loginBtn = document.getElementById('login-btn');
const loginError = document.getElementById('login-error');
const symbolSelect = document.getElementById('symbol');
const botMessagesUl = document.getElementById('bot-messages');
const chartContainer = document.getElementById('chart-container');

const validLogin = 'admin';
const validPassword = 'MODERATOR';

let widget = null;
let currentSymbol = symbolSelect.value;

const botForecasts = {
  BTCUSDT: [
    'BTC растет, возможен откат.',
    'Покупка по текущей цене — рискованно.',
    'Ожидается сильное движение вверх.',
    'Цена может зафиксировать уровень поддержки.',
  ],
  ETHUSDT: [
    'ETH стабилизируется, можно ждать входа.',
    'Высокая волатильность сегодня.',
    'Ожидается рост на новостях.',
    'Возможен небольшой спад перед ростом.',
  ],
  SOLUSDT: [
    'SOL демонстрирует силу, держать позиции.',
    'Скоро может быть коррекция.',
    'Идеальное время для покупки.',
    'Прогноз — боковой тренд.',
  ],
  XRPUSDT: [
    'XRP может пробить сопротивление.',
    'Будьте осторожны, возможен флэт.',
    'Позитивный настрой рынка.',
    'Краткосрочная фиксация прибыли возможна.',
  ],
  DOGEUSDT: [
    'DOGE нестабилен, играть осторожно.',
    'Ожидается всплеск активности.',
    'Можно рассматривать для краткосрочных сделок.',
    'Риск высок, рекомендуем наблюдать.',
  ],
  ADAUSDT: [
    'ADA укрепляет позиции.',
    'Небольшая коррекция — нормальное явление.',
    'Рост на фоне позитивных новостей.',
    'Текущий уровень — хороший вход.',
  ],
};

document.getElementById('login').addEventListener('keydown', e => {
  if (e.key === 'Enter') loginBtn.click();
});
document.getElementById('password').addEventListener('keydown', e => {
  if (e.key === 'Enter') loginBtn.click();
});

loginBtn.addEventListener('click', () => {
  const login = document.getElementById('login').value.trim();
  const password = document.getElementById('password').value.trim();
  if (login === validLogin && password === validPassword) {
    loginError.textContent = '';
    loginContainer.style.display = 'none';
    loader.style.display = 'flex';
    setTimeout(() => {
      loader.style.display = 'none';
      app.style.display = 'block';
      initTradingViewWidget(currentSymbol);
      startBot();
    }, 3000);
  } else {
    loginError.textContent = 'Неверный логин или пароль';
  }
});

function initTradingViewWidget(symbol) {
  if(widget) widget.remove();
  widget = new TradingView.widget({
    container_id: "chart-container",
    symbol: symbol,
    interval: "60",
    timezone: "Etc/UTC",
    theme: "dark",
    style: "1",
    locale: "ru",
    toolbar_bg: "#0e0e10",
    enable_publishing: false,
    allow_symbol_change: false,
    hide_top_toolbar: true,
    save_image: false,
    studies: [],
  });
}

symbolSelect.addEventListener('change', e => {
  currentSymbol = e.target.value;
  initTradingViewWidget(currentSymbol);
  updateBotMessages();
});

let botInterval = null;

function startBot() {
  updateBotMessages();
  if(botInterval) clearInterval(botInterval);
  botInterval = setInterval(updateBotMessages, 5000);
}
function stopBot() {
  if(botInterval) {
    clearInterval(botInterval);
    botInterval = null;
  }
}

function updateBotMessages() {
  const forecasts = botForecasts[currentSymbol] || ['Прогнозов нет.'];
  botMessagesUl.innerHTML = '';
  let shuffled = forecasts.slice().sort(() => 0.5 - Math.random());
  let toShow = shuffled.slice(0, 3);
  toShow.forEach(text => {
    const li = document.createElement('li');
    li.textContent = text;
    botMessagesUl.appendChild(li);
  });
}
</script>

</body>
</html>
