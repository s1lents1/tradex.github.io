<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tradex App без TradingView</title>
  <style>
    body, html {
      margin: 0; padding: 0; height: 100%; background: #0e0e10; font-family: sans-serif; color: white;
    }
    #login-container {
      height: 100vh; width: 100vw; display: flex; flex-direction: column;
      justify-content: center; align-items: center; background: #0e0e10;
    }
    #login-container input {
      margin: 8px 0; padding: 10px; width: 200px; font-size: 16px;
      border-radius: 4px; border: 1px solid #555; background: #1a1a1a; color: white;
    }
    #login-container button {
      margin-top: 10px; padding: 10px 20px; font-size: 16px;
      border-radius: 4px; border: none; background: #3a3a3a; color: white;
      cursor: pointer;
    }
    #login-error {
      margin-top: 10px; height: 20px; color: #f44336;
    }
    #loader {
      display: none; height: 100vh; width: 100vw;
      justify-content: center; align-items: center;
      background: #0e0e10; color: white; font-size: 24px;
    }
    #graph-container {
      display: none; height: 100vh; width: 100vw; position: relative;
      padding: 20px;
    }
    #symbol-selector {
      position: absolute; top: 20px; left: 20px;
      background: rgba(20, 20, 20, 0.8); padding: 10px; border-radius: 4px;
      border: 1px solid #444;
      z-index: 10;
    }
    select {
      background: #0e0e10; color: white; border: 1px solid #555;
      border-radius: 4px; padding: 5px;
    }
    canvas {
      background: #1a1a1a; border-radius: 8px;
      max-width: 100%; max-height: 90vh;
    }
  </style>
</head>
<body>

  <div id="login-container">
    <input id="login" type="text" placeholder="Login" autocomplete="off" />
    <input id="password" type="password" placeholder="Password" autocomplete="off" />
    <button id="login-btn">Sign In</button>
    <div id="login-error"></div>
  </div>

  <div id="loader">Tradex App Loading...</div>

  <div id="graph-container">
    <div id="symbol-selector">
      <label for="symbol">Монета:</label>
      <select id="symbol">
        <option value="BTC">Bitcoin (BTC)</option>
        <option value="ETH">Ethereum (ETH)</option>
        <option value="SOL">Solana (SOL)</option>
        <option value="XRP">XRP</option>
        <option value="DOGE">Dogecoin (DOGE)</option>
        <option value="ADA">Cardano (ADA)</option>
      </select>
    </div>
    <canvas id="chart"></canvas>
  </div>

  <!-- Подключаем Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const loginContainer = document.getElementById('login-container');
    const loader = document.getElementById('loader');
    const graphContainer = document.getElementById('graph-container');
    const loginBtn = document.getElementById('login-btn');
    const loginError = document.getElementById('login-error');
    const symbolSelect = document.getElementById('symbol');

    const validLogin = 'admin';
    const validPassword = 'MODERATOR';

    let chart = null;

    loginBtn.addEventListener('click', () => {
      const login = document.getElementById('login').value.trim();
      const password = document.getElementById('password').value.trim();

      if(login === validLogin && password === validPassword) {
        loginError.textContent = '';
        loginContainer.style.display = 'none';
        loader.style.display = 'flex';

        setTimeout(() => {
          loader.style.display = 'none';
          graphContainer.style.display = 'block';
          loadChart(symbolSelect.value);
        }, 2000);
      } else {
        loginError.textContent = 'Неверный логин или пароль';
      }
    });

    symbolSelect.addEventListener('change', () => {
      loadChart(symbolSelect.value);
    });

    function loadChart(symbol) {
      // Для демонстрации — создаём рандомные данные для графика
      const labels = [];
      const dataPoints = [];
      const days = 30;

      for(let i = days; i >= 1; i--) {
        labels.push(`День -${i}`);
        // Рандом цены в диапазоне в зависимости от символа
        const base = {
          BTC: 50000,
          ETH: 3500,
          SOL: 150,
          XRP: 1,
          DOGE: 0.25,
          ADA: 2
        };
        const volatility = base[symbol] * 0.1;
        dataPoints.push((base[symbol] + (Math.random() - 0.5) * volatility).toFixed(2));
      }

      if(chart) {
        chart.destroy();
      }

      const ctx = document.getElementById('chart').getContext('2d');
      chart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: labels,
          datasets: [{
            label: `${symbol} Цена`,
            data: dataPoints,
            borderColor: '#00ff99',
            backgroundColor: 'rgba(0,255,153,0.3)',
            fill: true,
            tension: 0.3,
            pointRadius: 0
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: false,
              ticks: { color: 'white' }
            },
            x: {
              ticks: { color: 'white' }
            }
          },
          plugins: {
            legend: {
              labels: { color: 'white' }
            }
          }
        }
      });
    }
  </script>
</body>
</html>
